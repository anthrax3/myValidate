/*! myValidate - v1.0.1 - 2014-02-20
* https://github.com/jonasmello/myValidate
* Copyright (c) 2014 Jonas Mello; Licensed MIT */
!function(a,b){"use strict";a.fn.myValidate=function(b){return this.each(function(){a.data(this,"myValidate",new a.myValidate(this,b))})},a.myValidate=function(b,c){this.version="1.3.1",this.el=b,this.callbackSubmit=!1,this.options=a.extend({},a.myValidate.options,c),this.$form=null,this.noValidate=!1,this.debug("log",this.options),this.init()},a.myValidate.options={debug:!1,error:"Some required fields are empty.",errorattach:"It is necessary to attach a file.",errormail:"Please enter a valid email address.",errorcpf:"CPF Inválido",errorcnpj:"CNPJ Inválido",erroequal:"Campos %s não são iguais",required:"required",notification:".notification",errorcolor:"#F00",beforeValidate:function(){},callError:function(a){b.console.log(a),a.find(".notification").slideDown()},callSuccess:function(a){this.callbackSubmit=!0,a.submit()}},a.myValidate.prototype.validarCPF=function(a){var b,c,d,e,f=a.replace(/\D/g,""),g=/^(\d{1})\1{10}$/;if(11!==f.length)return!1;if(g.test(f))return!1;for(c=0,b=0;9>b;b+=1)c+=parseInt(f.charAt(b),10)*(10-b);if(d=c%11,e=d>1?11-d:0,parseInt(f.charAt(9),10)!==e)return!1;for(c=0,b=0;10>b;b+=1)c+=parseInt(f.charAt(b),10)*(11-b);return d=c%11,e=d>1?11-d:0,parseInt(f.charAt(10),10)!==e?!1:!0},a.myValidate.prototype.validarCNPJ=function(a){var b,c,d,e,f,g=a.replace(/\D/g,""),h=/^(\d{1})\1{13}$/;if(14!==g.length)return!1;if(h.test(g))return!1;for(c=0,b=0;12>b;b+=1)d=(3>=b?5:13)-b,c+=parseInt(g.charAt(b),10)*d;if(c%=11,e=0===c||1===c?0:11-c,parseInt(e,10)===parseInt(g.charAt(12),10)){for(c=0,b=0;13>b;b+=1)d=(4>=b?6:14)-b,c+=parseInt(g.charAt(b),10)*d;if(c%=11,f=0===c||1===c?0:11-c,f===parseInt(g.charAt(13),10))return!0}return!1},a.myValidate.prototype.init=function(){var b=this;a(this.element).submit(function(c){b.$form=a(this),b.callbackSubmit&&(c.preventDefault(),b.noValidate=!1,b.getErrorMessage(),b.settings.beforeValidate(b.$form),b.getRequireds(this))})},a.myValidate.prototype.getRequireds=function(b){var c=this,d=a(b).find('[data-myrules^="'+this.settings.required+'"]');a(b).find("*").removeClass("error"),d.each(function(){var b=a(this);c.notVal(b),c.validateEmail(b),c.validateCpf(b),c.validateCnpj(b),c.validateSelect(b),c.validateCheckbox(b),c.validateEqual(b)}),this.noValidate?this.settings.callError(this.$form):this.settings.callSuccess(this.$form)},a.myValidate.prototype.notification=function(b){a(this.settings.notification).html(b)},a.myValidate.prototype.getErrorMessage=function(){this.settings.error=this.$form.data("error")||this.settings.error,this.settings.errormail=this.$form.data("errormail")||this.settings.errormail,this.settings.errorattach=this.$form.data("errorattach")||this.settings.errorattach,this.settings.errorcpf=this.$form.data("errorcpf")||this.settings.errorcpf,this.settings.errorcnpj=this.$form.data("errorcnpj")||this.settings.errorcnpj,this.settings.erroequal=this.$form.data("erroequal")||this.settings.erroequal},a.myValidate.prototype.notVal=function(a){""===a.val()&&(this.noValidate=!0,this.notification(this.settings.error),a.addClass("error"),this.notFile(a))},a.myValidate.prototype.notFile=function(a){a.is('input[type="file"]')&&(this.notification(this.settings.errorattach),this.noValidate=!0,a.parent().addClass("error").find(".label").addClass("error"),this.notification(this.settings.errorattach))},a.myValidate.prototype.validateEmail=function(a){if(a.filter('[data-myrules*="email"]').length){var b=/^[\d\w]+([_.-]?[\d\w]+)*@([\d\w_-]{2,}(\.){1})+?[\d\w]{2,4}$/;b.test(a.val())||(this.noValidate=!0,a.addClass("error"),this.notification(this.settings.errormail))}},a.myValidate.prototype.validateCpf=function(a){a.filter('[data-myrules*="cpf"]').length&&(this.validarCPF(a.val())||(this.noValidate=!0,a.addClass("error"),this.notification(this.settings.errorcpf)))},a.myValidate.prototype.validateCnpj=function(a){a.filter('[data-myrules*="cnpj"]').length&&(this.validarCNPJ(a.val())||(this.noValidate=!0,a.addClass("error"),this.notification(this.settings.errorcnpj)))},a.myValidate.prototype.validateSelect=function(a){a.is("select")&&0===a.val()&&(this.noValidate=!0,this.notification(this.settings.error),a.next(".chzn-container").addClass("error"))},a.myValidate.prototype.validateCheckbox=function(a){a.is('input[type="checkbox"]')&&!a.is("input:checked")&&(a.parent().addClass("error"),this.noValidate=!0,this.notification(this.settings.errormail))},a.myValidate.prototype.validateEqual=function(b){if(b.filter('[data-myrules*="equal"]').length){var c=b.data("myrules").search("equal"),d=b.data("myrules").slice(c);d=d.replace("equal[",""),d=d.replace("]",""),a('[name="'+d+'"]').val()!==b.val()&&(this.noValidate=!0,this.notification(this.settings.erroequal),b.addClass("error"),a('[name="'+d+'"]').addClass("error"))}}}(jQuery,window);